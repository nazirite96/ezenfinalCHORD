<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
    
<mapper namespace="taskMapper">
	<!-- 일정 시퀀스 조회 -->
	<select id="getSchdSeq" resultType="int">
		select schedule_SEQ.nextval from dual
	</select>
	
	<insert id="insertSchd" parameterType="SchdDTO">
	    insert into schedule values(
	    #{schd_no},#{schd_loc},#{schd_memo}
	    )
	</insert>
	<insert id="insertTimeLine" parameterType="SchdDTO">
	    insert into timeline values(
	    #{timeline_seq.nextval},#{cont_kind},#{cont_no},#{cont_no},sysdate,#{pro_no},#{mem_no}
	    )
	</insert>
	<insert id="insertParti" parameterType="SchdDTO">
	    insert into participants values(
	    #{cont_kind},#{cont_no},#{mem_no}
	    )
	</insert>
	<insert id="insertSchdulDate" parameterType="SchdDTO">
		insert all 
		into time
			values(
			#{cont_kind},#{cont_no},'s',TO_DATE(#{time_start_date},'YYYY/MM/DD HH24:MI')
			)
		into time
			values(
			#{cont_kind},#{cont_no},'e',TO_DATE(#{time_end_date},'YYYY/MM/DD HH24:MI')
			)
		select * from dual
	</insert>
</mapper>