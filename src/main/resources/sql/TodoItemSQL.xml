<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="todoItemMapper">

	<!-- 할일 항목 등록 -->
	<insert id="insertTodoItem" parameterType="todoItemDTO">
		insert into todo_item(todo_item_no,todo_item_content,todo_item_chk,todo_no,todo_item_date) 
		values(todo_item_SEQ.nextval, #{todo_item_content}, 'n', #{todo_no},#{todo_item_date})
	</insert>
	
	<!-- 할일 등록(담당자)--> 
	<insert id="insertTodoItemPi" parameterType="todoItemDTO">
		insert into participants(cont_kind,cont_no,mem_no)
		values('todo',#{todo_no},#{ti_mem_no})
	</insert>

	<!-- 할일 항목 수정 -->
	<update id="updateTodoItem" parameterType="todoItemDTO">
		UPDATE todo_item
		   SET todo_item_content = #{todo_item_content}
		   	 , todo_item_chk = #{todo_item_chk}
		   	 , todo_item_date = #{todo_item_date}
		 WHERE todo_item_no = #{todo_item_no}
	</update>	

	<!-- 할일 항목 삭제 -->
	<delete id="deleteTodoItem" parameterType="int">
		DELETE FROM todo_item
		 WHERE todo_item_no = #{todo_item_no}
	</delete>
	
	<!-- 할일의 항목 조회 -->
	<select id="getTodoItemList" parameterType="int" resultType="todoItemDTO">
		SELECT ti.* FROM todo_item ti
		 WHERE todo_no = #{todo_no}
		 ORDER BY todo_item_date
	</select>	
	
</mapper>